<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link href="qrstyle.css" rel="stylesheet" />
        <title>QuestionnaireResponse</title>
    </head>

    <body>
        <div class="container logos">
            <div class="questionnaire-response-logo">
                <img src="QuestionnaireReponseLogo.svg" />
            </div>
        </div>

        <div class="container cd">
            <div class="form">
                <div class="row">
                    <p>Select a Sample QuestionnaireResponse</p>
                </div>
                <div class="row">
                    <select id="jsonDropdown">
                        <option value="1">Sample Payload</option>
                        <option value="2">Sample Payload without headers</option>
                        <option value="3">Example Homecare Referral</option>
                        <option value="4">Simple Payload</option>
                        <option value="5">Medium Payload</option>
                        <option value="6">Complex Payload</option>
                        <option value="8">Standard Questions Payload</option>
                        <option value="9">Complex Payload - Display Text</option>
                        <option value="10">Complex Payload - Group Headers</option>
                        <option value="11">Complex Payload - Nesting</option>
                        <option value="12">Complex Payload - Nesting Error</option>
                    </select>
                </div>
                <div class="row">
                    <p>Or paste a FHIR QuestionnaireResponse JSON</p>
                </div>
                <div class="row">
                    <textarea rows="16" cols="80" id="jsonInput"></textarea>
                </div>
                <div class="row">
                    <button id="submit">Process</button>
                </div>
            </div>
        </div>
       
        <section id="QuestionnaireResponse"></section>    
        
        <div class="container2 about">
            <div class="smallcontainer">
                <h1>ABOUT</h1>
                <p>
                    The QuestionaireResponse formatter applet was created to help with debugging HL7 FHIR QuestionnaireResponse payloads, by rendering independent QuestionnaireResponses on-screen in a way that might be read by human beings. The QuestionnaireResponse is rendered without a corresponding HL7 FHIR Questionnaire resource.
                </p>
                <p> <h2>Display Elements</h2>
                    When a QuestionnaireResponse is handled independent of its Questionnaire, there are 4 types of data to format differently on-screen to a user:</br>                  
                    
                </br><b>1. Standard Questions:</b> Use item.text for the question, and item.answer[] for the answer(s). <span style="color: crimson; background-color: rgb(255, 213, 213);"> no item.item[] allowed</span></br>
                </br><b>2. Nested Questions:</b> In a standard question item, put the nested questions into item.answer[].item[]. <span style="color: crimson; background-color: rgb(255, 213, 213);">no item.item[] allowed</span></br>
                </br><b>3. Group Headers:</b> Use item.text for the header text, and include its grouped questions in item.item[]. <span style="color: crimson; background-color: rgb(255, 213, 213);">no item.answer[] allowed</span></br>
                </br><b>4. Display Text:</b> Use item.text for the header text, without item.item[] and without item.answer[].</br>
                    
                </p>
                <p>
                    For display format in the QuestionaireResponse formatter:
                    1) standard questions are displayed as {bold}-question : {normal}-answer
                    2) nested questions are indented
                    3) group headers are large header style
                    4) display-text are italics
      
                </p>
                <p>
                    <h2>Important Notes</h2>
        
                    A QuestionnaireResponse.item may NOT have both an item and an answer.</br>
                    expression: <span style="color: crimson; background-color:rgb(255, 213, 213);">(answer.exists() and item.exists()).not()</span></br></br>
                    
                    The only content that should be in a completed QuestionnaireResponse are the questions that have answers and any groups that contain them (to allow appropriate organizing of the grouped questions). In other words, a Questionnaire question presented to the user without an answer should NOT have a corresponding item in QuestionnaireResponse.</br>
                    Display-text cannot have nested children.</br>
                    The only way to know what question value sets options were presented to the user, or if there were are unanswered questions, is the cross-reference the QuestionnaireResponse with a Questionnaire.</br>
                </p>
                <p>
                    Note that this tool is intended for a QuestionnaireResponse that does NOT
                    reference a corresponding Questionnaire resource. Rather, all of the elements
                    that a user needs to interpret the meaning of a data point (i.e., headers,
                    question text, answer text) is included in the QuestionnaireResponse payload.
                </p>
                <p>
                    Learn more about
                    <a href="https://www.hl7.org/fhir/questionnaireresponse.html"
                        >QuestionnaireResponse</a
                    >
                    and
                    <a href="https://www.hl7.org/fhir/questionnaire.html">Questionnaire</a>
                    at the <a href="https://hl7.org/fhir">HL7 FHIR website</a>.
                </p>

                <div class="powered-by-caredove">
                    <a href="https://www.caredove.com"><img src="PoweredByCaredove.svg"/></a>
                </div>
            </div>
        </div>

        <script src="parser.js?v=1.1" async></script>
    </body>
</html>
